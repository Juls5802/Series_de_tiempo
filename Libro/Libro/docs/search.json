[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "An√°lisis de series de tiempo",
    "section": "",
    "text": "Introducci√≥n"
  },
  {
    "objectID": "index.html#esquina",
    "href": "index.html#esquina",
    "title": "An√°lisis de series de tiempo",
    "section": "Esquina",
    "text": "Esquina\nEste trabajo realiza un an√°lisis de dos bases de datos: Recaudo de impuestos internos por la DIAN para los a√±os 2000 a 2023 y consumo de energ√≠a por horas de la organizaci√≥n regional de transmisi√≥n PJM Interconnection para los a√±os 2004 a 2018. El an√°lisis se desarrolla de forma estad√≠stica, realizando la parte descriptiva con su correspondiente interpretaci√≥n."
  },
  {
    "objectID": "index.html#an√°lisis-del-recaudo-de-impuestos-internos-por-la-dian",
    "href": "index.html#an√°lisis-del-recaudo-de-impuestos-internos-por-la-dian",
    "title": "An√°lisis de series de tiempo",
    "section": "An√°lisis del recaudo de impuestos internos por la DIAN",
    "text": "An√°lisis del recaudo de impuestos internos por la DIAN\nLa DIAN es la entidad encargada de administrar y recaudar los impuestos internos y aduaneros en el pa√≠s. El recaudo de impuestos internos que realiza la DIAN cada mes se refiere a la suma total de los impuestos nacionales recaudados dentro del territorio colombiano durante ese per√≠odo mensual. Los impuestos internos son aquellos que se aplican a las actividades econ√≥micas y transacciones que ocurren dentro del pa√≠s, los cuales pueden incluir: IVA, impuesto de renta y complementarios, impuesto de timbre, impuesto de consumo, impuesto a la riqueza, impuesto predial, ICA, entre otros.\nCon el proyecto se busca estudiar esta serie de tiempo para ver como es el comportamiento de los impuestos internos de Colombia a lo largo de los a√±os, por ejemplo, encontrar patrones y observar qu√© tanto han aumentado dichos impuestos.\nA continuaci√≥n se presenta la manera en que se realiza la carga de los datos y un vistazo preliminar de la serie de tiempo en la Figura¬†1 .\n\n# Carga de la base de datos\ndian&lt;-read_excel(\"dian.xlsx\", range=\"A7:C313\", sheet = \"Rec mensual a junio 2023\" )\na√±os&lt;-2000:2023\ndian&lt;-dplyr::filter(dian,A√±o %in% a√±os)\ncolnames(dian)&lt;-c(\"A√±o\",\"Mes\",\"Impuestos\")\ndian$fecha&lt;-as.Date(paste(dian$A√±o, dian$Mes, \"1\", sep = \"-\"), format = \"%Y-%B-%d\")\ndian&lt;-dian[,3:4]\n\n# Gr√°fico de la serie de tiempo\ndian2&lt;-ts(dian$Impuestos,start=c(2000,01),frequency=12)\nplot(dian2, main=\"Serie de tiempo del recaudo mensual interno\",\n     cex.main=1.3,\n     xlab=\"Tiempo\",\n     ylab=\"Recaudo interno\",\n     cex.lab=0.4)\n\n\n\n\nFigura¬†1: Gr√°fico de la serie de tiempo de la DIAN."
  },
  {
    "objectID": "Descriptivo Dian.html",
    "href": "Descriptivo Dian.html",
    "title": "1¬† Introduction",
    "section": "",
    "text": "This is a book created from markdown and executable code.\nSee Knuth (1984) for additional discussion of literate programming.\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n\nKnuth, Donald E. 1984. ¬´Literate Programming¬ª. Comput. J. 27 (2): 97-111. https://doi.org/10.1093/comjnl/27.2.97."
  },
  {
    "objectID": "Descriptivo Energia.html",
    "href": "Descriptivo Energia.html",
    "title": "2¬† An√°lisis descriptivo Energ√≠a",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Knuth, Donald E. 1984. ‚ÄúLiterate Programming.‚Äù Comput.\nJ. 27 (2): 97‚Äì111. https://doi.org/10.1093/comjnl/27.2.97."
  },
  {
    "objectID": "Descriptivo Dian.html#estabilizaci√≥n-de-la-varianza-marginal",
    "href": "Descriptivo Dian.html#estabilizaci√≥n-de-la-varianza-marginal",
    "title": "2¬† An√°lisis descriptivo del recaudo de impuestos internos por la DIAN",
    "section": "2.1 Estabilizaci√≥n de la varianza marginal",
    "text": "2.1 Estabilizaci√≥n de la varianza marginal\nTeniendo en cuenta lo observado utilizando el gr√°fico de la serie de tiempo, se puede evidenciar una heterocedasticidad marginal la cual debemos corregir, para esto utilizaremos la transformaci√≥n de Box-cox, esto teniendo en cuenta que no se tienen valors negativos, de este modo se tiene que\n\nMASS::boxcox(lm(dian2 ~ 1),seq(-5, 5, length = 50)) ##Notese que no acputra al 1\n\n\n\nforecast::BoxCox.lambda(dian2, method =\"loglik\",\n                        lower = -1, upper = 3)#Entrega el valor de lambda (0.1).\n\n[1] 0.1\n\n\nCon el anterior gr√°fico y salida podemos observar que el valor que maximiza la log-verosimilitud es 0.1, pero este valor es bastante cercano a 0, por lo tanto lo aproximaremos para asi poder utilizar la transformaci√≥n logaritmo, notese que el intervalo de confianza no captura al 1 por lo tanto puede ser conveniente realizar la transformaci√≥n. En los gr√°ficos posteriores analizaremos si dicha transformaci√≥n logra estabilizar la varianza marginal de nuestros datos.\n\nplot(forecast::BoxCox(dian2,lambda=0.1))\n\n\n\npar(mar = c(1,1,1,1))\nldian2=log(dian2)\nMASS::boxcox(lm(ldian2 ~ 1),seq(-5, 5, length = 50)) #Si captura al 1\n\n\n\n\nNotese que el intervalo de confianza de la transformaci√≥n Box-cox logra capturar el valor de 1, lo cual nos indica que no es necesario transformar los datos nuevamente y que la transformaci√≥n ayudo de buena manera a estabilizar la varianza marginal de nuestra serie de tiempo.\nEn el siguiente gr√°fico mostramos la serie de recaudo de la Dian con y sin la transformaci√≥n logaritmo y es posible observar que la escala disminuye pero a su vez se observan algunos cambios considerables en la forma de la serie, lo cual es un buen indicativo de la relevancia de realizar la transformaci√≥n.\n\n#par(mfrow=c(2,1))\nplot(dian2,main=\"Serie Dian sin Transformar\")\n\n\n\nplot(ldian2,main=\"Series Dian con Transformaci√≥n BoxCox\")\n\n\n\n\nTeniendo lo anterior en cuenta, presentaremos un gr√°fico de la serie sin tendencia un poco m√°s interactivo e informativo, con el fin de lograr conocer los distintos valores en cada una de las fechas.\n\nclass(ldian2)\n\n[1] \"ts\"\n\ndian3<-window(ldian2, start = c(2000,1))\nts_plot(dian3,title=\"Serie de tiempo del recaudo mensual interno\",\n        Ytitle=\"Recaudo interno\",\n        Xtitle=\"Tiempo\",\n        Xgrid=TRUE,\n        Ygrid=TRUE)"
  },
  {
    "objectID": "index.html#an√°lisis-del-consumo-de-energ√≠a-de-la-empresa-pjm",
    "href": "index.html#an√°lisis-del-consumo-de-energ√≠a-de-la-empresa-pjm",
    "title": "An√°lisis de series de tiempo",
    "section": "An√°lisis del consumo de energ√≠a de la empresa PJM",
    "text": "An√°lisis del consumo de energ√≠a de la empresa PJM\nLa empresa PJM es una organizaci√≥n de transmisi√≥n regional que coordina el movimiento de electricidad mayorista en la totalidad, o parte, de 13 estados y el Distrito de Columbia.\nEl an√°lisis del consumo de energ√≠a es esencial para mejorar la eficiencia operativa, reducir costos, cumplir con regulaciones y promover la sostenibilidad, por lo cual, este proyecto analiza la serie de tiempo con el fin de encontrar variaciones en el consumo de energ√≠a de los 13 estados y el Distrito de Columbia a lo largo del tiempo, as√≠ como tambi√©n descubrir posibles patrones.\nA continuaci√≥n se presenta la manera en que se realiza la carga de los datos y un vistazo preliminar de la serie de tiempo en la Figura¬†2 .\n\n# Carga de la base de datos\nAEP_hourly&lt;-read.csv(\"AEP_hourly.csv\")\nAEP_hourly$Datetime&lt;-as.POSIXct(AEP_hourly$Datetime, format = \"%Y-%m-%d %H:%M:%S\")\nAEP_hourly$fecha&lt;-as.Date(AEP_hourly$Datetime)\n\nenergia &lt;- AEP_hourly %&gt;%\n  group_by(fecha) %&gt;%\n  summarise(Energia = sum(AEP_MW))\nenergia&lt;-energia[-5055,]\n\n# Gr√°fico de la serie de tiempo\nenergia2&lt;-ts(energia$Energia,start=c(2004,10,01),frequency=365.25)\nplot(energia2, main=\"Serie de tiempo de la energ√≠a diaria de una empresa estadounidense\",\n     cex.main=1,\n     xlab=\"Tiempo \",\n     ylab=\"Energ√≠a consumida\",\n     cex.lab=0.4)\n\n\n\n\nFigura¬†2: Gr√°fico de la serie de tiempo de la energ√≠a."
  },
  {
    "objectID": "index.html#sobre-el-trabajo",
    "href": "index.html#sobre-el-trabajo",
    "title": "An√°lisis de series de tiempo",
    "section": "Sobre el trabajo",
    "text": "Sobre el trabajo\nEste trabajo realiza un an√°lisis de dos bases de datos: Recaudo de impuestos internos por la DIAN para los a√±os 2000 a 2023 y consumo de energ√≠a por horas de la organizaci√≥n regional de transmisi√≥n PJM Interconnection para los a√±os 2004 a 2018. El an√°lisis se desarrolla de forma estad√≠stica, realizando la parte descriptiva con su correspondiente interpretaci√≥n."
  },
  {
    "objectID": "Descriptivo Energia.html#estabilizaci√≥n-de-la-varianza-marginal",
    "href": "Descriptivo Energia.html#estabilizaci√≥n-de-la-varianza-marginal",
    "title": "2¬† An√°lisis del consumo de energ√≠a de la empresa PJM",
    "section": "2.1 Estabilizaci√≥n de la varianza marginal",
    "text": "2.1 Estabilizaci√≥n de la varianza marginal\nComo se observa en la gr√°fica de la serie de tiempo no es necesario realizar una estabilizaci√≥n de la varianza para continuar con el an√°lisis descriptivo, sin embargo, para comprobar esto, se hace una transformaci√≥n de Box-cox para ver que tanto se estabiliza la varianza. En la Figura¬†2.1 se observa que se sugiere una transformaci√≥n dado que 1 no est√° contenido en el intervalo.\n\nMASS::boxcox(lm(energia2 ~ 1),seq(-5, 5, length = 50))\nabline(v = 1, col = \"red\", lty = 2)\n\n\n\n\nFigura¬†2.1: Gr√°fico de la verosimilitud en funci√≥n del hiperpar√°metro lambda.\n\n\n\n\nEn la siguiente salida se puede ver que el \\(\\lambda\\) sugerido es \\(-0.25\\), como es un n√∫mero negativo, se procede a hacer la transformaci√≥n Box-Cox usando logaritmo natural.\n\nforecast::BoxCox.lambda(energia2, method =\"loglik\",lower = -1, upper = 3)\n\n[1] -0.25\n\n\nEn la Figura¬†2.2 a continuaci√≥n se muestra que la serie en escala logar√≠tmica nuevamente no tiene la varianza estabilizada, dado que no se contiene al 1.\n\nlenergia2=log(energia2)\nMASS::boxcox(lm(lenergia2 ~ 1),seq(-5, 5, length =  50))\nabline(v = 1, col = \"red\", lty = 2)\n\n\n\n\nFigura¬†2.2: Gr√°fico de la verosimilitud para la serie en escala logar√≠tmica, en funci√≥n del hiperpar√°metro lambda.\n\n\n\n\nAdem√°s, se puede notar en la Figura¬†2.3 , que no hay una diferencia significativa entre la serie transformada y no transformada. Por lo que el an√°lisis descriptivo se contin√∫a usando los datos originales.\n\npar(mar = c(1,1,1,1))\npar(mfrow=c(2,1),mar=c(3,3,3,3))\nplot(energia2,main=\"Serie energ√≠a sin Transformar\",cex.main=1)\nplot(lenergia2,main=\"Serie energ√≠a con Transformaci√≥n BoxCox\",cex.main=1)\n\n\n\n\nFigura¬†2.3: Serie original y serie con transformaci√≥n logar√≠tmica."
  },
  {
    "objectID": "Descriptivo Energia.html#estimaci√≥n-preliminar-de-la-tendencia",
    "href": "Descriptivo Energia.html#estimaci√≥n-preliminar-de-la-tendencia",
    "title": "2¬† An√°lisis del consumo de energ√≠a de la empresa PJM",
    "section": "2.2 Estimaci√≥n preliminar de la tendencia",
    "text": "2.2 Estimaci√≥n preliminar de la tendencia\nComo se observa en la gr√°fica de la serie de tiempo no es necesario realizar una estimaci√≥n de la tendencia para continuar con el an√°lisis descriptivo, sin embargo, se hace una estimaci√≥n preliminar usando varios m√©todos.\n\n2.2.1 Tendencia lineal\n\n# Creaci√≥n del objeto tibble\nenergia_1=energia %&gt;% map_df(rev)\nFechas=as.Date(energia_1$fecha)\nenergia_xts=xts(x = energia_1$Energia,frequency = 365.25,order.by = Fechas)\n\n# Creaci√≥n objeto tssible a partir del objeto tibble\ndf_energia=data.frame(Energia=energia_1$Energia,fecha=energia_1$fecha)\ntbl_energia=tibble(df_energia)\ntbl_energia_format_fecha=tbl_energia\ntsbl_energia=as_tsibble(tbl_energia_format_fecha,index=fecha)\n\nEn la siguiente salida se presenta el ajuste de una regresi√≥n lineal para estimar la tendencia. Como el \\(R^2\\) es \\(0.058\\), se sugiere que no hay tendencia.\n\n# An√°lisis de tendencia con regresion simple\nsummary(fit_e&lt;-lm(energia2~time(energia2),na.action=NULL))\n\n\nCall:\nlm(formula = energia2 ~ time(energia2), na.action = NULL)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-137653  -34064   -5533   31129  179275 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    6128528.2   325172.5   18.85   &lt;2e-16 ***\ntime(energia2)   -2862.7      161.7  -17.70   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 45920 on 5052 degrees of freedom\nMultiple R-squared:  0.05841,   Adjusted R-squared:  0.05823 \nF-statistic: 313.4 on 1 and 5052 DF,  p-value: &lt; 2.2e-16\n\n\nEn la Figura¬†2.4 se presenta la serie de tiempo de la energ√≠a con la estimaci√≥n lineal de la tendencia.\n\nplot(energia2, main=\"Serie de tiempo de la energ√≠a diaria de una empresa estadounidense\",\n     cex.main=1,\n     xlab=\"Tiempo \",\n     ylab=\"Energ√≠a consumida\",\n     cex.lab=0.4)\nabline(fit_e,col=\"darkcyan\",lwd=2)\n\n\n\n\nFigura¬†2.4: Gr√°fico de la serie de tiempo de la energ√≠a con la estimaci√≥n lineal de la tendencia.\n\n\n\n\nPosteriormente, se procede a eliminar la tendencia lineal, como se puede ver en la Figura¬†2.5 .\n\n# Eliminaci√≥n de la tendencia con la predicci√≥n la recta\nElimiTendenerg&lt;-energia2-predict(fit_e)\nplot(ElimiTendenerg,main=\"Serie energ√≠a sin tendencia\",\n     cex.main=1.3,\n     xlab=\"Tiempo\",\n     ylab=\"Consumo de energ√≠a\",\n     cex.lab=0.4)\n\n\n\n\nFigura¬†2.5: Gr√°fico de la serie de tiempo de la energ√≠a sin tendencia estimada con regresi√≥n lineal.\n\n\n\n\n\n\n2.2.2 Tendencia con promedios m√≥viles\nEn la Figura¬†2.6 , se muestra un ajuste de la tendencia con promedios m√≥viles, como se puede ver, aparentemente hay una sobrestimaci√≥n de la tendencia, ya que muestra comportamientos que no son tan visibles en la serie de tiempo original.\n\n# Descomposici√≥n filtro de promedios m√≥viles\nenergia_decompo=decompose(energia2)\nplot(energia_decompo)\n\n\n\n\nFigura¬†2.6: Gr√°fico de la serie de tiempo de la energ√≠a sin tendencia estimada con promedios m√≥viles.\n\n\n\n\n\n\n2.2.3 Tendencia con diferenciaci√≥n\nEn la Figura¬†2.7 se presentan los gr√°ficos de las series sin tendencia, estimada con regresi√≥n lineal y con diferenciaci√≥n respectivamente, se puede notar que la serie sin tendencia estimada con diferenciaci√≥n impide ver los ciclos que se ven en la serie original.\n\ntsibble_energia&lt;-as_tsibble(energia2)\npar(mar = c(2,2,2,2))\npar(mfrow=c(2,1))\n\nplot(resid(fit_e), type=\"l\", main=\"Sin tendencia\") \nplot(diff(energia2), type=\"l\", main=\"Primera Diferencia\") \n\n\n\n\nFigura¬†2.7: Gr√°fico de la serie de tiempo de la energ√≠a sin tendencia estimada con regresi√≥n lineal y diferenciaci√≥n.\n\n\n\n\n\n\n2.2.4 Comparaci√≥n de los ACF\nEn la Figura¬†2.8 se puede notar un descenso r√°pido hacia 0 para las series original y sin tendencia estimada con regresi√≥n lineal, mientras que para la serie sin tendencia estimada con diferenciaci√≥n, se puede apreciar mejor el ciclo estacional de aproximadamente 7 d√≠as.\n\n# Gr√°ficos de los ACF\npar(mar = c(3,2,3,2))\npar(mfrow=c(3,1))\nacf(energia2, 60, main=\"ACF energia\")\nacf(resid(fit_e), 60, main=\"ACF Sin tendencia\") \nacf(diff(energia2), 60, main=\"ACF Primera Diferencia\")\n\n\n\n\nFigura¬†2.8: Gr√°ficos de autocorrelaci√≥n para la serie original, sin tendencia estimada con regresi√≥n lineal y con la primera diferencia."
  },
  {
    "objectID": "Descriptivo Energia.html#estimaci√≥n-de-la-estacionalidad",
    "href": "Descriptivo Energia.html#estimaci√≥n-de-la-estacionalidad",
    "title": "2¬† An√°lisis del consumo de energ√≠a de la empresa PJM",
    "section": "2.3 Estimaci√≥n de la estacionalidad",
    "text": "2.3 Estimaci√≥n de la estacionalidad\n\n2.3.1 Detecci√≥n de estacionalidad\nEn la Figura¬†2.9 se puede observar el gr√°fico de retardos para la serie original, es evidente que hay una asociaci√≥n lineal m√°s fuerte para el primer retardo, aunque para los dem√°s retardos tambi√©n se encuentra asociaci√≥n lineal.\n\n# Gr√°fica de retardos\npar(mar = c(3, 2, 3, 2))\nastsa::lag1.plot(energia2, 7,corr=F)\n\n\n\n\nFigura¬†2.9: Gr√°ficos de retardos para la serie de consumo de energ√≠a.\n\n\n\n\nEn la Figura¬†2.10 se puede ver el gr√°fico de retardos para la serie sin tendencia estimada con diferenciaci√≥n, aqu√≠ no es visible ninguna asociaci√≥n lineal fuerte entre los rezagos.\n\n# Gr√°fica de retardos\nastsa::lag1.plot(diff(energia2), 7,corr=F)\n\n\n\n\nFigura¬†2.10: Gr√°ficos de retardos para la serie sin tendencia estimada con diferenciaci√≥n.\n\n\n\n\nAdicionalmente se calcula el √≠ndice AMI, el cual se puede visualizar en la Figura¬†2.11.\n\n# Indice AMI \ntseriesChaos::mutual(energia2, partitions = 50, lag.max = 10, plot=TRUE) \n\n\n\n\nFigura¬†2.11: Gr√°fico del promedio de informaci√≥n mutua.\n\n\n\n\nEs posible ver que el primer rezago reduce el estado de incertidumbre para la observaci√≥n en el tiempo \\(t\\).\n\nenergiasss&lt;-rbind(energia,c(\"2018-08-03\",0))\nenergia_df1&lt;-energiasss\nenergia_df1$time = as.POSIXct(energia_df1$fecha, \"%Y-%m-%d\")\nenergia_df&lt;-cbind(energia_df1[1:5054,1:2],energia_df1[2:5055,3])\n\nenergia_df$weekday &lt;- wday(energia_df$time, label = TRUE, abbr = TRUE)\nenergia_df$month &lt;- factor(month.abb[month(energia_df$time)], levels =   month.abb)\n\nEn la Figura¬†2.12 se presenta el gr√°fico de subseries diarias para la serie original, se puede ver que hay estacionalidad ya que el valor medio del d√≠a domingo por ejemplo, es menor al del resto de d√≠as.\n\n# Gr√°fica de subseries semanal con datos originales\ngg_subseries(tsbl_energia,y=Energia,period=7)\n\n\n\n\nFigura¬†2.12: Gr√°fica de subseries diarias.\n\n\n\n\nEn la Figura¬†2.13 se presenta el gr√°fico de subseries mensuales para la serie original, se puede ver que no hay ciclos estacionales mensuales, ya que todos tienen la misma media.\n\n# Gr√°fica de subseries anual con datos originales\ngg_subseries(tsbl_energia,y=Energia,period=12)\n\n\n\n\nFigura¬†2.13: Gr√°fica de subseries anuales.\n\n\n\n\n\n\n2.3.2 Periodograma\n\n2.3.2.1 Para los datos originales\nEn la Figura¬†2.14 se presenta el periodograma para la serie original, el valor del periodo donde se maximiza el periodograma es \\(182.86\\), es decir, aproximadamente, el ciclo es de medio a√±o.\n\n# Periodograma Datos originales\nspectrum(as.numeric(energia2),log='no')\n\nPeriodogramaEnergia2=spectrum(as.numeric(energia2),log='no')\nubicacionenergia=which.max(PeriodogramaEnergia2$spec)\n\nsprintf(\"El valor de la frecuencia donde se maximiza el periodograma para la serie es: %s\",PeriodogramaEnergia2$freq[ubicacionenergia])\n\n[1] \"El valor de la frecuencia donde se maximiza el periodograma para la serie es: 0.00546875\"\n\nsprintf(\"El periodo correspondiente es aproximadamente: %s\",1/PeriodogramaEnergia2$freq[ubicacionenergia])\n\n[1] \"El periodo correspondiente es aproximadamente: 182.857142857143\"\n\n\n\n\n\nFigura¬†2.14: Periodograma para la serie original.\n\n\n\n\n\n\n2.3.2.2 Para la serie sin tendencia lineal\nEn la Figura¬†2.15 se presenta el periodograma para la serie sin tendencia lineal, el valor del periodo donde se maximiza el periodograma nuevamente es \\(182.86\\), es decir, aproximadamente, el ciclo es de medio a√±o.\n\n# Periodograma sin tendencia lineal\nspectrum(as.numeric(ElimiTendenerg),log='no')\n\nPeriodogramaEnergia2_lineal=spectrum(as.numeric(ElimiTendenerg),log='no')\nubicacionlogenergia=which.max(PeriodogramaEnergia2_lineal$spec)\n\nsprintf(\"El valor de la frecuencia donde se maximiza el periodograma para la serie es: %s\",PeriodogramaEnergia2_lineal$freq[ubicacionlogenergia])\n\n[1] \"El valor de la frecuencia donde se maximiza el periodograma para la serie es: 0.00546875\"\n\nsprintf(\"El periodo correspondiente es aproximadamente: %s\",1/PeriodogramaEnergia2_lineal$freq[ubicacionlogenergia])\n\n[1] \"El periodo correspondiente es aproximadamente: 182.857142857143\"\n\n\n\n\n\nFigura¬†2.15: Periodograma para la serie sin tendencia lineal.\n\n\n\n\n\n\n2.3.2.3 Para la serie sin tendencia usando diferenciaci√≥n\nEn la Figura¬†2.16 se presenta el periodograma para la serie sin tendencia estimada usando diferenciaci√≥n, el valor del periodo donde se maximiza el periodograma es \\(3.5\\), es decir, aproximadamente, el ciclo es de tres d√≠as.\n\n# Periodograma diferenciaci√≥n\nspectrum(as.numeric(diff(energia2)),log='no')\n\nPeriodogramaEnergia2_dif=spectrum(as.numeric(diff(energia2)),log='no')\nubicacionlogenergia=which.max(PeriodogramaEnergia2_dif$spec)\n\nsprintf(\"El valor de la frecuencia donde se maximiza el periodograma para la serie es: %s\",PeriodogramaEnergia2_dif$freq[ubicacionlogenergia])\n\n[1] \"El valor de la frecuencia donde se maximiza el periodograma para la serie es: 0.2857421875\"\n\nsprintf(\"El periodo correspondiente es aproximadamente: %s\",1/PeriodogramaEnergia2_dif$freq[ubicacionlogenergia])\n\n[1] \"El periodo correspondiente es aproximadamente: 3.49965823650034\"\n\n\n\n\n\nFigura¬†2.16: Periodograma para la serie sin tendencia usando diferenciaci√≥n.\n\n\n\n\n\n\n\n2.3.3 Estimaci√≥n\nAhora procederemos a estimar el ciclo estacional que se observa en esta serie de tiempo, es importante resaltar que con ayuda de los graficos exploratorios y el periodograma se observo que el periodo de la componente estacional es \\(s=12\\), por lo tanto utilizaremos en primer lugar componentes de fourier, esto teniendo en cuenta que se aprecia que la componente estacional sigue un comportamiento deterministico y posiblemente sinosoidal. Teniendo lo anterior en cuenta el modelo viene dado por: \\[\\begin{align*} x_t&= ‚àë_{i=1}^k a_icos(kùúît)+b_isen(kùúît) + w_t \\\\ \\end{align*}\\] Donde \\(k\\) corresponder√° al orden de la expansi√≥n en series de Fourier y los coeficientes \\(a_i\\) y \\(b_i\\) con \\(i=1,...,k\\) ser√°n estimados a trav√©s del m√©todo de m√≠nimos cuadrados. El c√°lculo de esta componente se muestra a continuaci√≥n considerando un orden \\(k=3\\).\n\ns=1/PeriodogramaEnergia2$freq[ubicacionenergia]\n\nsin_est=diff(energia2,lag=round(s),differences=1)\n\nplot.ts(sin_est, main=\"Serie sin estacionalidad\", ylab='')\n\n\n\n\n\n# Frecuencia angular w=2*pi/s\nfrec_ang=(2*pi/183)\n\nenergia_copia=energia\n\n#Fourier k=1 \nenergia_copia$sin = sin(c(1:5054)*(1*frec_ang))\nenergia_copia$cos = cos(c(1:5054)*(1*frec_ang))\n\n#Fourier k=2 \nenergia_copia$sin2 = sin(c(1:5054)*(2*frec_ang))\nenergia_copia$cos2 = cos(c(1:5054)*(2*frec_ang))\n\n#Fourier k=3 \nenergia_copia$sin3 = sin(c(1:5054)*(3*frec_ang))\nenergia_copia$cos3 = cos(c(1:5054)*(3*frec_ang))\n\nlinmodel_ciclo1&lt;-lm(Energia~1+sin+cos,data=energia_copia)\nlinmodel_ciclo2&lt;-lm(Energia~1+sin+cos+sin2+cos2,data=energia_copia)\nlinmodel_ciclo3&lt;-lm(Energia~1+sin+cos+sin2+cos2+sin3+cos3,data=energia_copia)\n\nsummary(linmodel_ciclo1)\n\n\nCall:\nlm(formula = Energia ~ 1 + sin + cos, data = energia_copia)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-123583  -25009    -763   24258  145198 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 371981.5      540.3  688.43   &lt;2e-16 ***\nsin         -21616.9      765.2  -28.25   &lt;2e-16 ***\ncos         -32486.6      763.0  -42.58   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 38410 on 5051 degrees of freedom\nMultiple R-squared:  0.3413,    Adjusted R-squared:  0.3411 \nF-statistic:  1309 on 2 and 5051 DF,  p-value: &lt; 2.2e-16\n\nsummary(linmodel_ciclo2)\n\n\nCall:\nlm(formula = Energia ~ 1 + sin + cos + sin2 + cos2, data = energia_copia)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-121273  -25065    -578   23895  142064 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 371998.9      537.7 691.805  &lt; 2e-16 ***\nsin         -21669.2      761.5 -28.455  &lt; 2e-16 ***\ncos         -32508.8      759.4 -42.810  &lt; 2e-16 ***\nsin2          -732.1      760.4  -0.963    0.336    \ncos2         -5398.2      760.4  -7.099 1.43e-12 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 38220 on 5049 degrees of freedom\nMultiple R-squared:  0.348, Adjusted R-squared:  0.3475 \nF-statistic: 673.6 on 4 and 5049 DF,  p-value: &lt; 2.2e-16\n\nsummary(linmodel_ciclo3)\n\n\nCall:\nlm(formula = Energia ~ 1 + sin + cos + sin2 + cos2 + sin3 + cos3, \n    data = energia_copia)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-122150  -24871    -895   23895  143573 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 372002.2      537.1 692.636  &lt; 2e-16 ***\nsin         -21672.6      760.6 -28.493  &lt; 2e-16 ***\ncos         -32522.7      758.5 -42.879  &lt; 2e-16 ***\nsin2          -701.3      759.6  -0.923 0.355904    \ncos2         -5400.4      759.5  -7.110 1.32e-12 ***\nsin3          1096.1      759.1   1.444 0.148814    \ncos3          2630.0      759.9   3.461 0.000543 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 38180 on 5047 degrees of freedom\nMultiple R-squared:  0.3498,    Adjusted R-squared:  0.349 \nF-statistic: 452.5 on 6 and 5047 DF,  p-value: &lt; 2.2e-16\n\nresults_ciclo1=linmodel_ciclo1$fitted.values\nresults_ciclo1&lt;-as.data.frame(results_ciclo1)\nresults_ciclo_ts1&lt;-ts(results_ciclo1,start=c(2004,10,01),frequency=365.25)\n\nresults_ciclo2=linmodel_ciclo2$fitted.values\nresults_ciclo2&lt;-as.data.frame(results_ciclo2)\nresults_ciclo_ts2&lt;-ts(results_ciclo2,start=c(2004,10,01),frequency=365.25)\n\nresults_ciclo3=linmodel_ciclo3$fitted.values\nresults_ciclo3&lt;-as.data.frame(results_ciclo3)\nresults_ciclo_ts3&lt;-ts(results_ciclo3,start=c(2004,10,01),frequency=365.25)\n\nEn la ?fig-energestacionalidad se presenta la serie original con la estimaci√≥n de la componente estacional via componentes de Fourier y la serie sin estacionalidad. Se puede notar que las componentes de Fourier logran captar bien es c√≠clo estacional que tiene la serie, AGREGAR MAIS COZINHAS.\n\n# Series original\nplot(energia2, main=\"Serie de tiempo del consumo de energ√≠a\",\n     cex.main=1.3,\n     xlab=\"Tiempo \",\n     ylab=\"Energ√≠a consumida\",\n     cex.lab=0.4)\n\n# Estimaci√≥n de la estacionalidad\nlines(results_ciclo_ts1,col=\"darkcyan\")\nlines(results_ciclo_ts2,col=\"magenta\")\nlines(results_ciclo_ts3,col=\"orange\")\n\n# Serie sin estacionalidad\nplot(energia2-results_ciclo_ts3)\n\n\n\n\nFigura¬†2.17: Serie original con estamaci√≥n de la componente estacional y serie sin estacionalidad.\n\n\n\n\n\n\n\nFigura¬†2.18: Serie original con estamaci√≥n de la componente estacional y serie sin estacionalidad."
  },
  {
    "objectID": "Descriptivo Energia.html#estimaci√≥n-de-la-tendencia",
    "href": "Descriptivo Energia.html#estimaci√≥n-de-la-tendencia",
    "title": "2¬† An√°lisis del consumo de energ√≠a de la empresa PJM",
    "section": "2.2 Estimaci√≥n de la tendencia",
    "text": "2.2 Estimaci√≥n de la tendencia\nComo se observa en la gr√°fica de la serie de tiempo no es necesario realizar una estimaci√≥n de la tendencia para continuar con el an√°lisis descriptivo, sin embargo, se hace una estimaci√≥n preliminar usando varios m√©todos, con el fin de comprobar que la serie sin tendencia no var√≠a mucho.\n\n2.2.1 Tendencia lineal\n\n# Creaci√≥n del objeto tibble\nenergia_1=energia %&gt;% map_df(rev)\nFechas=as.Date(energia_1$fecha)\nenergia_xts=xts(x = energia_1$Energia,frequency = 365.25,order.by = Fechas)\n\n# Creaci√≥n objeto tssible a partir del objeto tibble\ndf_energia=data.frame(Energia=energia_1$Energia,fecha=energia_1$fecha)\ntbl_energia=tibble(df_energia)\ntbl_energia_format_fecha=tbl_energia\ntsbl_energia=as_tsibble(tbl_energia_format_fecha,index=fecha)\n\nEn la siguiente salida se presenta el ajuste de una regresi√≥n lineal para estimar la tendencia. El \\(R^2\\) ind√≠ca qu√© tan bien se ajusta la recta a los datos, en este caso tiene un valor de \\(0.058\\), por lo que sugiere que no hay tendencia lineal.\n\n# An√°lisis de tendencia con regresion simple\nsummary(fit_e&lt;-lm(energia2~time(energia2),na.action=NULL))\n\n\nCall:\nlm(formula = energia2 ~ time(energia2), na.action = NULL)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-137653  -34064   -5533   31129  179275 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    6128528.2   325172.5   18.85   &lt;2e-16 ***\ntime(energia2)   -2862.7      161.7  -17.70   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 45920 on 5052 degrees of freedom\nMultiple R-squared:  0.05841,   Adjusted R-squared:  0.05823 \nF-statistic: 313.4 on 1 and 5052 DF,  p-value: &lt; 2.2e-16\n\n\nEn la Figura¬†2.4 se presenta la serie de tiempo de la energ√≠a con la estimaci√≥n lineal de la tendencia.\n\nplot(energia2, main=\"Serie de tiempo de la energ√≠a diaria de una empresa estadounidense\",\n     cex.main=1,\n     xlab=\"Tiempo \",\n     ylab=\"Energ√≠a consumida\",\n     cex.lab=0.4)\nabline(fit_e,col=\"darkcyan\",lwd=2)\n\n\n\n\nFigura¬†2.4: Gr√°fico de la serie de tiempo de la energ√≠a con la estimaci√≥n lineal de la tendencia.\n\n\n\n\nPosteriormente, se procede a eliminar la tendencia lineal, como se puede ver en la Figura¬†2.5 .\n\n# Eliminaci√≥n de la tendencia con la predicci√≥n la recta\nElimiTendenerg&lt;-energia2-predict(fit_e)\nplot(ElimiTendenerg,main=\"Serie energ√≠a sin tendencia\",\n     cex.main=1.3,\n     xlab=\"Tiempo\",\n     ylab=\"Consumo de energ√≠a\",\n     cex.lab=0.4)\n\n\n\n\nFigura¬†2.5: Gr√°fico de la serie de tiempo de la energ√≠a sin tendencia estimada con regresi√≥n lineal.\n\n\n\n\n\n\n2.2.2 Tendencia con promedios m√≥viles\nEn la Figura¬†2.6 , se muestra un ajuste de la tendencia con promedios m√≥viles, como se puede ver, aparentemente hay una sobrestimaci√≥n de la tendencia, ya que muestra comportamientos que no son tan visibles en la serie de tiempo original.\n\n# Descomposici√≥n filtro de promedios m√≥viles\nenergia_decompo=decompose(energia2)\nplot(energia_decompo)\n\n\n\n\nFigura¬†2.6: Gr√°fico de la serie de tiempo de la energ√≠a sin tendencia estimada con promedios m√≥viles.\n\n\n\n\n\n\n2.2.3 Tendencia con diferenciaci√≥n\nEn la Figura¬†2.7 se presentan los gr√°ficos de las series sin tendencia, estimada con regresi√≥n lineal y con diferenciaci√≥n respectivamente, se puede notar que la serie sin tendencia estimada con diferenciaci√≥n impide ver los ciclos que se ven en la serie original.\n\ntsibble_energia&lt;-as_tsibble(energia2)\npar(mar = c(2,2,2,2))\npar(mfrow=c(2,1))\n\nplot(resid(fit_e), type=\"l\", main=\"Sin tendencia lineal\") \nplot(diff(energia2), type=\"l\", main=\"Primera Diferencia\") \n\n\n\n\nFigura¬†2.7: Gr√°fico de la serie de tiempo de la energ√≠a sin tendencia estimada con regresi√≥n lineal y diferenciaci√≥n.\n\n\n\n\n\n\n2.2.4 Comparaci√≥n de los ACF\nEn la Figura¬†2.8 se puede notar un descenso r√°pido hacia 0 para las series original y sin tendencia estimada con regresi√≥n lineal, mientras que para la serie sin tendencia estimada con diferenciaci√≥n, se puede apreciar mejor el ciclo estacional de aproximadamente 7 d√≠as.\n\n# Gr√°ficos de los ACF\npar(mar = c(3,2,3,2))\npar(mfrow=c(3,1))\nacf(energia2, 60, main=\"ACF energia\")\nacf(resid(fit_e), 60, main=\"ACF Sin tendencia\") \nacf(diff(energia2), 60, main=\"ACF Primera Diferencia\")\n\n\n\n\nFigura¬†2.8: Gr√°ficos de autocorrelaci√≥n para la serie original, sin tendencia estimada con regresi√≥n lineal y con la primera diferencia.\n\n\n\n\nSi bien se estima la tendencia con diferentes m√©todos, se decide trabajar con los datos originales, ya que no hay un cambio significativo en la serie cuando se elimina la tendencia."
  },
  {
    "objectID": "Descriptivo Dian.html#tendencia-estimaci√≥n-y-eliminaci√≥n",
    "href": "Descriptivo Dian.html#tendencia-estimaci√≥n-y-eliminaci√≥n",
    "title": "2¬† An√°lisis descriptivo del recaudo de impuestos internos por la DIAN",
    "section": "2.2 Tendencia Estimaci√≥n y eliminaci√≥n",
    "text": "2.2 Tendencia Estimaci√≥n y eliminaci√≥n\nLuego de estabilizar la varianza marginal de nuestra serie, procederemos a estimar la tendencia y a eliminarla. Para estimar dicha tendencia inicaremos utilizando una tendencia lineal deterministica y posteriormente restaremos dicha tendencia estimada a los datos de nuestra serie, de este modo se tiene lo siguiente:\n\nsummary(fit<-lm(ldian2~time(ldian2),na.action=NULL))\n\n\nCall:\nlm(formula = ldian2 ~ time(ldian2), na.action = NULL)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-0.6587 -0.2338  0.0349  0.2164  0.8567 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -188.74811    5.53318  -34.11   <2e-16 ***\ntime(ldian2)    0.10150    0.00275   36.90   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.3133 on 280 degrees of freedom\nMultiple R-squared:  0.8295,    Adjusted R-squared:  0.8289 \nF-statistic:  1362 on 1 and 280 DF,  p-value: < 2.2e-16\n\nplot(ldian2,ylab=\"Recaudo interno\") \nabline(fit,col=\"darkcyan\",lwd=2)\n\n\n\n\nPreliminarmente es posible ver que la recta se ajusta de un buen modo a nuestra serie de tiempo, puesto que la tendencia de nuestra serie es creciente, ahora procederemos a observar la serie de tiempo al eliminar la tendencia utilizando este metodo y tenemos lo siguiente:\n\nElimiTenddian<-ldian2-predict(fit)\nplot(ElimiTenddian,main=\"Serie Dian sin tendencia y con varianza estable\",\n     cex.main=1.3,\n     xlab=\"Tiempo\",\n     ylab=\"Recaudo interno\",\n     cex.lab=0.4)\n\n\n\n\nEs posible observar que nuestra serie de tiempo cambio considerablemente, puesto que la escala de los valores se disminujo bastante y adem√°s los datos oscilan al rededor del 0, lo cual nos indica que nuestra serie no presenta tendencia\n\nacf(ElimiTenddian,lag.max=179,main=\"Acf Serie Dian sin tendencia\")\n\n\n\n\nNotese que el gr√°fico de autocorrelaci√≥n, nos indica preliminarmente la presencia de posibles componente estacionales, pero esto lo analizaremos un poco m√°s en detalle m√°s adelante.\nPero este no es el unico modo de realizar la estimaci√≥n de la tendencia, tambien podemos utilizar herramientas no parametricas, pero como no hemos identificado la componente estacional, estas nos daran una estimaci√≥n preliminar de la tendencia. La primera de ellas que vamos a utilizar es la descomposici√≥n via filtros de promedios moviles, que se presenta a continuaci√≥n:\n\ndian_decompo=decompose(ldian2)\nplot(dian_decompo)\n\n\n\n#dian_decompo$trend\n\nNotese que la tendencia estimada via filtros de promedio moviles es aproximadamente lineal, lo cual respalda la idea de utilizar la forma deterministica de estimar la varianza, adem√°s parece estimar de mdodo correcto la componente estacional y en la componente residual se observan algunos patrones estacionales.\nAhora procederemos a utilizar la descomposci√≥n STL, para hacer un an√°lisis similar.\n\nlibrary(feasts)\nlibrary(fable)\n### Gr√°fico ##\ntsibble_dian<-as_tsibble(ldian2)\nstr(tsibble_dian)\n\ntbl_ts [282 √ó 2] (S3: tbl_ts/tbl_df/tbl/data.frame)\n $ index: mth [1:282] 2000 ene., 2000 feb., 2000 mar., 2000 abr., 2000 may., 200...\n $ value: num [1:282] 14.2 13.9 14 14.1 14.1 ...\n - attr(*, \"key\")= tibble [1 √ó 1] (S3: tbl_df/tbl/data.frame)\n  ..$ .rows: list<int> [1:1] \n  .. ..$ : int [1:282] 1 2 3 4 5 6 7 8 9 10 ...\n  .. ..@ ptype: int(0) \n - attr(*, \"index\")= chr \"index\"\n  ..- attr(*, \"ordered\")= logi TRUE\n - attr(*, \"index2\")= chr \"index\"\n - attr(*, \"interval\")= interval [1:1] 1M\n  ..@ .regular: logi TRUE\n\ntsibble_dian %>%\n  model(\n    STL(value ~ trend() +\n          season(window = \"periodic\"),\n        robust = TRUE)) %>%\n  components() %>%\n  autoplot()\n\n\n\n#tsibble_dian_notendstl<-tsibble_dian$Log\n\nNotese que el gr√°fico anterior es bastante similar al obtenido utilizando filtro de promedios moviles y podemos realizar una interpretaci√≥n bastante similar, Tambien es posible eliminar la tendencia utilizando diferenciaci√≥n, pero se debe tener en cuenta que la diferenciaci√≥n tambien puede eliminar la componente estacional que se tenga presente en la serie de tiempo, a continuaci√≥n se muestra la manera en que se realiz√≥ la eliminaci√≥n de la tendencia utilizando la diferenciaci√≥n y su comparaci√≥n con el primer metodo para eliminar tendencia utilizado.\n\npar(mar = c(2,2,2,2))\nfitdian = lm(ldian2~time(ldian2), na.action=NULL) \npar(mfrow=c(2,1))\nplot(resid(fitdian), type=\"l\", main=\"sin tendencia\") \nplot(diff(ldian2), type=\"l\", main=\"Primera Diferencia\") #Primera diferencia ordinaria\n\n\n\n\nNotese que cuando eliminamos la tendencia utilizando la diferenciaci√≥n se observa un poco m√°s centrada en comparaci√≥n a cuando utilizamos la regresi√≥n lineal ajustada, esto puede ser producto de la posible eliminaci√≥n de la componente estacional producto de la utilizaci√≥n de la diferenciaci√≥n Revisar bien esta interpretacion con las muchachas\nEn el siguiente grafico se compara las funciones de autocorrelaci√≥n obtenidas para la series cuando eliminamos la tendencia utilizando lm y utilizando diferenciaci√≥n, junto con la funci√≥n de autocorrelaci√≥n para la serie de tiempo con varianza marginal estable.\n\npar(mar = c(3,2,3,2))\npar(mfrow=c(3,1)) # plot ACFs\nacf(ldian2, 60, main=\"ACF Dian objeto ts varianza estable por boxcox\")\nacf(resid(fitdian), 60, main=\"ACF Sin tendencia (resid(fitdian))\") \nacf(diff(ldian2), 60, main=\"ACF Primera Diferencia\")\n\n\n\n\nFalta interpretaci√≥n WAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
  },
  {
    "objectID": "Descriptivo Dian.html#detecci√≥n-de-estacionalidad",
    "href": "Descriptivo Dian.html#detecci√≥n-de-estacionalidad",
    "title": "2¬† An√°lisis descriptivo del recaudo de impuestos internos por la DIAN",
    "section": "2.3 Detecci√≥n de estacionalidad",
    "text": "2.3 Detecci√≥n de estacionalidad\nLuego de estabilizar la varianza marginal y de tratar la tendencia, procedemos a observar si existe presencia de posibles ciclos o ciclos estacionales, para dicha tarea vamos a emplear multiples metodos descriptivos que nos permiten obtener informaci√≥n sobre esta componente. Iniciaremos por observar el grafico de retardos, el cual viene dado a continuaci√≥n:\n\nts_info(ElimiTenddian)\n\n The ElimiTenddian series is a ts object with 1 variable and 282 observations\n Frequency: 12 \n Start time: 2000 1 \n End time: 2023 6 \n\npar(mar = c(3,2,3,2))\nastsa::lag1.plot(ElimiTenddian, 12,corr=F)\n\n\n\nts_lags(ElimiTenddian,lags=1:12)\n\n\n\n\n\nEl gr√°fico de retardos nos indica de manera descriptiva la posible relaci√≥n existente entre un tiempo y algunos de sus retardos, para este caso en particular se toman 12 retardos (esto teniendo en cuenta la frecuencia mensual de la serie de tiempo), en este caso es posible observar que existe una clara relaci√≥n lineal y directa con el rezago 12, los dem√°s rezagos no parecen ser del todo significativos. Notese que los dos graficos anteriores nos dan una informaci√≥n bastante similar.\nAhora observemos el gr√°fico de subseries, el cual toma los valores por cada mes de cada uno de los a√±os dentro la serie, como sabemos buscamos obsevar si en el historico encontramos dieferentes valores medio mes tras mes, de este modo tenemos lo siguiente:\n\nrequire(feasts)\ndian2_tsbl_notend=as_tsibble(ElimiTenddian)\ndian2_tsbl_notend%>%gg_subseries(value)\n\n\n\n\nEs posible observar que la media en cada uno de los meses es distinta, esto es un claro indicio de la presencia de una componente ciclica estacional o ciclica, a contibuaci√≥n se presentan algunas otras graficas descriptivas para observar la presencia de un ciclo estaciona.\n\ndian2sint_df <- data.frame(year = floor(time(ElimiTenddian)), month = cycle(ElimiTenddian),ElimiTenddian = as.numeric(ElimiTenddian))\ndian2sint_df$month <- factor(month.abb[dian2sint_df$month], levels = month.abb)\ndian2sint_summary <- dian2sint_df %>%group_by(month) %>%summarise(mean= mean(ElimiTenddian),sd = sd(ElimiTenddian))\ndian2sint_summary\n\n# A tibble: 12 √ó 3\n   month    mean     sd\n   <fct>   <dbl>  <dbl>\n 1 Jan    0.320  0.150 \n 2 Feb   -0.230  0.206 \n 3 Mar   -0.0446 0.0880\n 4 Apr    0.244  0.311 \n 5 May    0.196  0.226 \n 6 Jun    0.199  0.259 \n 7 Jul    0.0320 0.123 \n 8 Aug   -0.230  0.255 \n 9 Sep    0.240  0.187 \n10 Oct   -0.386  0.128 \n11 Nov    0.0676 0.0882\n12 Dec   -0.439  0.0985\n\nplot_ly (data = dian2sint_summary, x = ~ month, y = ~ mean, type = \"bar\", name   = \"Mean\") %>%\n  layout (title = \"dian2sint - Monthly Average\", yaxis =list(title = \"Mean\",   range = c(min(dian2sint_summary$mean), max(dian2sint_summary$mean))))\n\n\n\n\n\nEn el anterior gr√°fico se observa el valor medio tomado por cada uno de los meses, es posible observar que tiene un comportamiento parecido al grafico de subseries y de manera analoga nos muestra que exite una componente estacional.\nA continuaci√≥n se muestran los mapas de calor para la serie Dian con varianza maeginal estable y tendencia eliminada por el metodo de diferenciacion y lineal.\n\nTSstudio::ts_heatmap(ElimiTenddian,title = \"Mapa de Calor - Impuestos Dian sin tendencia\")\n\n\n\n\nTSstudio::ts_heatmap(diff(ldian2),title = \"Mapa de Calor - Impuestos Dian sin tendencia\")\n\n\n\n\n\nAmbos mapas nos dan una informaci√≥n similar, en los cuales es posible observar que en los meses de noviembre, enero, junio, mayo y abril se tienen una mayor cantidad de recaudo de impuestos, mientras que en diciembre,octubre, agosto, marzo y febrero tienen un menor valor de recaudo de impuestos a√±o tras a√±o, nuevamente este gr√°fico nos ayuda a comprender la existencia de un cliclo estacional que posiblemente tenga un periodo de 12 meses.\n\n2.3.1 Periodograma\nCuando hablamos de una componente estacional dentro de nuestra serie de tiempo, tambien necesitamos hablar de su periodo y de su frecuencia, para esto utilizaremos el periodograma.\n\nspectrum(as.numeric(ElimiTenddian),log='no')\nabline(v=0.5, lty=2,col=\"red\")\n\n\n\nspectrum(as.numeric(ElimiTenddian),log='no',span=5)\n\n\n\nspectrum(as.numeric(ElimiTenddian),log='no',span=c(5,5))\n\n\n\nspectrum(as.numeric(ElimiTenddian),log='no',span=c(2,2))\n\n\n\n\nNotese que en los graficos anteriores se tienen diferentes valores de suavizamiento para nuestro periodograma, pues aunque en este caso no es dificil observar los puntos donde se tiene un pico, el suavizamiento puede ayudarnos a observar de mdood m√°s simple los picos que son verdaderamente significativos.\n\nPeriodgramadldian2_sintendencia=spectrum(as.numeric(ElimiTenddian),log='no')\n\n\n\nubicacionlogdian=which.max(Periodgramadldian2_sintendencia$spec)\nsprintf(\"El valor de la frecuencia donde se m√°ximiza el periodograma para la serie es: %s\",Periodgramadldian2_sintendencia$freq[ubicacionlogdian])\n\n[1] \"El valor de la frecuencia donde se m√°ximiza el periodograma para la serie es: 0.5\"\n\nsprintf(\"El periodo correspondiente es aproximadamente: %s\",1/Periodgramadldian2_sintendencia$freq[ubicacionlogdian])\n\n[1] \"El periodo correspondiente es aproximadamente: 2\"\n\n\nNotese que seg√∫n la salida obtenida, la frecuencia maxima se alcanza en 0.5 (es decir en 6/12=0.5) y se obtuvo que el periodo es 2, esto quiere decir que el ciclo se repite cada dos meses, pero notese que este es un multiplo no entero de 12, por lotanto en realidad se tiene que el periodo de la componente estacional serie de tipo anual (12 meses) Mirar esta interpretaci√≥n con las muchachas y preguntar al profe si esta correcto."
  },
  {
    "objectID": "Descriptivo Dian.html#desestacionalizar-o-eliminaci√≥n-de-la-componente-estacional",
    "href": "Descriptivo Dian.html#desestacionalizar-o-eliminaci√≥n-de-la-componente-estacional",
    "title": "2¬† An√°lisis descriptivo del recaudo de impuestos internos por la DIAN",
    "section": "2.4 Desestacionalizar o eliminaci√≥n de la componente estacional",
    "text": "2.4 Desestacionalizar o eliminaci√≥n de la componente estacional"
  }
]