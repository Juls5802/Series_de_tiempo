[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Análisis de series de tiempo",
    "section": "",
    "text": "Introducción"
  },
  {
    "objectID": "index.html#esquina",
    "href": "index.html#esquina",
    "title": "Análisis de series de tiempo",
    "section": "Esquina",
    "text": "Esquina\nEste trabajo realiza un análisis de dos bases de datos: Recaudo de impuestos internos por la DIAN para los años 2000 a 2023 y consumo de energía por horas de la organización regional de transmisión PJM Interconnection para los años 2004 a 2018. El análisis se desarrolla de forma estadística, realizando la parte descriptiva con su correspondiente interpretación."
  },
  {
    "objectID": "index.html#análisis-del-recaudo-de-impuestos-internos-por-la-dian",
    "href": "index.html#análisis-del-recaudo-de-impuestos-internos-por-la-dian",
    "title": "Análisis de series de tiempo",
    "section": "Análisis del recaudo de impuestos internos por la DIAN",
    "text": "Análisis del recaudo de impuestos internos por la DIAN\nLa DIAN es la entidad encargada de administrar y recaudar los impuestos internos y aduaneros en el país. El recaudo de impuestos internos que realiza la DIAN cada mes se refiere a la suma total de los impuestos nacionales recaudados dentro del territorio colombiano durante ese período mensual. Los impuestos internos son aquellos que se aplican a las actividades económicas y transacciones que ocurren dentro del país, los cuales pueden incluir: IVA, impuesto de renta y complementarios, impuesto de timbre, impuesto de consumo, impuesto a la riqueza, impuesto predial, ICA, entre otros.\nCon el proyecto se busca estudiar esta serie de tiempo para ver como es el comportamiento de los impuestos internos de Colombia a lo largo de los años, por ejemplo, encontrar patrones y observar qué tanto han aumentado dichos impuestos.\nA continuación se presenta la manera en que se realiza la carga de los datos y un vistazo preliminar de la serie de tiempo.\n\n\n\n\n#### Base de datos de la DIAN #####\ndian<-read_excel(\"dian.xlsx\", range=\"A7:C313\", sheet = \"Rec mensual a junio 2023\" )\naños<-2000:2023\ndian<-dplyr::filter(dian,Año %in% años)\ncolnames(dian)<-c(\"Año\",\"Mes\",\"Impuestos\")\ndian$fecha<-as.Date(paste(dian$Año, dian$Mes, \"1\", sep = \"-\"), format = \"%Y-%B-%d\")\ndian<-dian[,3:4]\n\n## Serie de tiempo de la DIAN ##\ndian2<-ts(dian$Impuestos,start=c(2000,01),frequency=12)\nplot(dian2, main=\"Serie de tiempo del recaudo mensual interno\",\n     cex.main=1.3,\n     xlab=\"Tiempo\",\n     ylab=\"Recaudo interno\",\n     cex.lab=0.4)"
  },
  {
    "objectID": "Descriptivo Dian.html",
    "href": "Descriptivo Dian.html",
    "title": "1  Introduction",
    "section": "",
    "text": "This is a book created from markdown and executable code.\nSee Knuth (1984) for additional discussion of literate programming.\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n\nKnuth, Donald E. 1984. «Literate Programming». Comput. J. 27 (2): 97-111. https://doi.org/10.1093/comjnl/27.2.97."
  },
  {
    "objectID": "Descriptivo Energia.html",
    "href": "Descriptivo Energia.html",
    "title": "2  Análisis descriptivo Energía",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Knuth, Donald E. 1984. “Literate Programming.” Comput.\nJ. 27 (2): 97–111. https://doi.org/10.1093/comjnl/27.2.97."
  },
  {
    "objectID": "Descriptivo Dian.html#estabilización-de-la-varianza-marginal",
    "href": "Descriptivo Dian.html#estabilización-de-la-varianza-marginal",
    "title": "1  Análisis descriptivo del recaudo de impuestos internos por la DIAN",
    "section": "1.1 Estabilización de la varianza marginal",
    "text": "1.1 Estabilización de la varianza marginal\nComo se observa en la gráfica de la serie de tiempo es necesario realizar una estabilización de la varianza para continuar con el análisis descriptivo, para esto se utilizó una transformación de Box-cox.\n\nMASS::boxcox(lm(dian2 ~ 1),seq(-5, 5, length = 50)) ##Notese que no captura al 1\n\n\n\nforecast::BoxCox.lambda(dian2, method =\"loglik\",\n                        lower = -1, upper = 3)#Entrega el valor de lambda (0.1), cercano a cero o sea que vale la pena pensar en una transformación logaritmica.\n\n[1] 0.1\n\nplot(forecast::BoxCox(dian2,lambda=0.1))"
  },
  {
    "objectID": "index.html#análisis-del-consumo-de-energía-de-la-empresa-pjm",
    "href": "index.html#análisis-del-consumo-de-energía-de-la-empresa-pjm",
    "title": "Análisis de series de tiempo",
    "section": "Análisis del consumo de energía de la empresa PJM",
    "text": "Análisis del consumo de energía de la empresa PJM\nLa empresa PJM es una organización de transmisión regional que coordina el movimiento de electricidad mayorista en la totalidad, o parte, de 13 estados y el Distrito de Columbia.\nEl análisis del consumo de energía es esencial para mejorar la eficiencia operativa, reducir costos, cumplir con regulaciones y promover la sostenibilidad, por lo cual, este proyecto analiza la serie de tiempo con el fin de encontrar variaciones en el consumo de energía de los 13 estados y el Distrito de Columbia a lo largo del tiempo, así como también descubrir posibles patrones.\n\n#### Base de datos de energia ####\nAEP_hourly<-read.csv(\"AEP_hourly.csv\")\nAEP_hourly$Datetime<-as.POSIXct(AEP_hourly$Datetime, format = \"%Y-%m-%d %H:%M:%S\")\nAEP_hourly$fecha<-as.Date(AEP_hourly$Datetime)\n\nenergia <- AEP_hourly %>%\n  group_by(fecha) %>%\n  summarise(Energia = sum(AEP_MW))\nenergia<-energia[-5055,]\n\n## Serie de tiempo de la energia ##\nenergia2<-ts(energia$Energia,start=c(2004,10,01),frequency=365.25)\nplot(energia2, main=\"Serie de tiempo de la energía diaria de una empresa estadounidense\",\n     cex.main=1.3,\n     xlab=\"Tiempo \",\n     ylab=\"Energía consumida\",\n     cex.lab=0.4)"
  },
  {
    "objectID": "index.html#sobre-el-trabajo",
    "href": "index.html#sobre-el-trabajo",
    "title": "Análisis de series de tiempo",
    "section": "Sobre el trabajo",
    "text": "Sobre el trabajo\nEste trabajo realiza un análisis de dos bases de datos: Recaudo de impuestos internos por la DIAN para los años 2000 a 2023 y consumo de energía por horas de la organización regional de transmisión PJM Interconnection para los años 2004 a 2018. El análisis se desarrolla de forma estadística, realizando la parte descriptiva con su correspondiente interpretación."
  },
  {
    "objectID": "Descriptivo Energia.html#estabilización-de-la-varianza-marginal",
    "href": "Descriptivo Energia.html#estabilización-de-la-varianza-marginal",
    "title": "2  Análisis del consumo de energía de la empresa PJM",
    "section": "2.1 Estabilización de la varianza marginal",
    "text": "2.1 Estabilización de la varianza marginal\nComo se observa en la gráfica de la serie de tiempo no es necesario realizar una estabilización de la varianza para continuar con el análisis descriptivo, sin embargo, se hace una transformación de Box-cox para ver que tanto se estabiliza la varianza. En la Figura 2.1 se observa que se sugiere una transformación, dado que 1 no está contenido en el intervalo.\n\nMASS::boxcox(lm(energia2 ~ 1),seq(-5, 5, length = 50))\nabline(v = 1, col = \"red\", lty = 2)\n\n\n\n\nFigura 2.1: Gráfico de la verosimilitud en función del hiperparámetro lambda.\n\n\n\n\nEn la siguiente salida se puede ver que el \\(\\lambda\\) sugerido es \\(-0.25\\), como es un número negativo, se procede a hacer la transformación Box-Cox usando logaritmo natural.\n\nforecast::BoxCox.lambda(energia2, method =\"loglik\",lower = -1, upper = 3)\n\n[1] -0.25\n\n\nEn la Figura 2.2 a continuación se muestra que la serie en escala logarítmica nuevamente no tiene la varianza estabilizada, dado que no se contiene al 1.\n\nlenergia2=log(energia2)\nMASS::boxcox(lm(lenergia2 ~ 1),seq(-5, 5, length =  50))\nabline(v = 1, col = \"red\", lty = 2)\n\n\n\n\nFigura 2.2: Gráfico de la verosimilitud para la serie en escala logarítmica, en función del hiperparámetro lambda.\n\n\n\n\nAdemás, gráficamente se ve, en la Figura 2.3 , que no hay una diferencia significativa entre la serie transformada y no transformada. Por lo que el análisis descriptivo se continua usando los datos originales.\n\npar(mar = c(1,1,1,1))\npar(mfrow=c(2,1),mar=c(3,3,3,3))\nplot(energia2,main=\"Serie energía sin Transformar\",cex.main=1)\nplot(lenergia2,main=\"Serie energía con Transformación BoxCox\",cex.main=1)\n\n\n\n\nFigura 2.3: Serie original y serie con transformación logarítmica."
  },
  {
    "objectID": "Descriptivo Energia.html#estimación-preliminar-de-la-tendencia",
    "href": "Descriptivo Energia.html#estimación-preliminar-de-la-tendencia",
    "title": "2  Análisis del consumo de energía de la empresa PJM",
    "section": "2.2 Estimación preliminar de la tendencia",
    "text": "2.2 Estimación preliminar de la tendencia\nComo se observa en la gráfica de la serie de tiempo no es necesario realizar una estimación de la tendencia para continuar con el análisis descriptivo, sin embargo, se hace una estimación preliminar usando varios métodos.\n\n2.2.0.1 Tendencia lineal\n\n# Creación del objeto tibble\nenergia_1=energia %>% map_df(rev)\nFechas=as.Date(energia_1$fecha)\nenergia_xts=xts(x = energia_1$Energia,frequency = 365.25,order.by = Fechas)\n\n# Creación objeto tssible a partir del objeto tibble\ndf_energia=data.frame(Energia=energia_1$Energia,fecha=energia_1$fecha)\ntbl_energia=tibble(df_energia)\ntbl_energia_format_fecha=tbl_energia\ntsbl_energia=as_tsibble(tbl_energia_format_fecha,index=fecha)\n\nEn la siguiente salida se presenta el ajuste de una regresión lineal para estimar la tendencia, como el \\(R^2\\) es \\(0.058\\), sugiere que no hay tendencia.\n\n# Análisis de tendencia con regresion simple\nsummary(fit_e<-lm(energia2~time(energia2),na.action=NULL))\n\n\nCall:\nlm(formula = energia2 ~ time(energia2), na.action = NULL)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-137653  -34064   -5533   31129  179275 \n\nCoefficients:\n                Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    6128528.2   325172.5   18.85   <2e-16 ***\ntime(energia2)   -2862.7      161.7  -17.70   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 45920 on 5052 degrees of freedom\nMultiple R-squared:  0.05841,   Adjusted R-squared:  0.05823 \nF-statistic: 313.4 on 1 and 5052 DF,  p-value: < 2.2e-16\n\n\nEn la Figura 2.4 se presenta la serie de tiempo de la energía con la estimación lineal de la tendencia.\n\nplot(energia2, main=\"Serie de tiempo de la energía diaria de una empresa estadounidense\",\n     cex.main=1,\n     xlab=\"Tiempo \",\n     ylab=\"Energía consumida\",\n     cex.lab=0.4)\nabline(fit_e,col=\"darkcyan\",lwd=2)\n\n\n\n\nFigura 2.4: Gráfico de la serie de tiempo de la energía con la estimación lineal de la tendencia.\n\n\n\n\n\n# Eliminación de la tendencia con la predicción la recta\nElimiTendenerg<-energia2-predict(fit_e)\nplot(ElimiTendenerg,main=\"Serie energia sin tendencia\",\n     cex.main=1.3,\n     xlab=\"Tiempo\",\n     ylab=\"Consumo de energia total\",\n     cex.lab=0.4)\n\n\n\n\n\n\n2.2.0.2 Tendencia con promedios móviles\nSe puede notar que está ficti.\n\n# Descomposición filtro de promedio moviles####\nenergia_decompo=decompose(energia2)\nplot(energia_decompo)\n\n\n\n\n\ntsibble_energia<-as_tsibble(energia2)\npar(mar = c(2,2,2,2))\nfit_e = lm(energia2~time(energia2), na.action=NULL) # Regresión sobre el tiempo\npar(mfrow=c(2,1))\nplot(resid(fit_e), type=\"l\", main=\"Sin tendencia\") #Sin tendencia quitandola con regresión\nplot(diff(energia2), type=\"l\", main=\"Primera Diferencia\") #Primera diferencia ordinaria\n\n\n\n\n\n# Gráficos de los ACF\npar(mar = c(3,2,3,2))\npar(mfrow=c(3,1))\nacf(energia2, 60, main=\"ACF energia\")\nacf(resid(fit_e), 60, main=\"ACF Sin tendencia\") \nacf(diff(energia2), 60, main=\"ACF Primera Diferencia\")\n\n\n\n\n\n# Gráfica de retardos\npar(mar = c(3, 2, 3, 2))\nastsa::lag1.plot(energia2, 7,corr=F)\n\n\n\n\n\n# Indice AMI \ntseriesChaos::mutual(energia2, partitions = 50, lag.max = 10, plot=TRUE) \n\n\n\n\n\n#energia_df<-energia\n#energia_df$time = as.POSIXct(energia_df$fecha, \"%Y-%m-%d\")\n#energia_df$weekday <- wday(energia_df$time, label = TRUE, abbr = TRUE)\n#energia_df$month <- factor(month.abb[month(energia_df$time)], levels =   month.abb)\nenergiasss<-rbind(energia,c(\"2018-08-03\",0))\nenergia_df1<-energiasss\nenergia_df1$time = as.POSIXct(energia_df1$fecha, \"%Y-%m-%d\")\nenergia_df<-cbind(energia_df1[1:5054,1:2],energia_df1[2:5055,3])\n\nenergia_df$weekday <- wday(energia_df$time, label = TRUE, abbr = TRUE)\nenergia_df$month <- factor(month.abb[month(energia_df$time)], levels =   month.abb)\n\nhead(energia_df)\n\n       fecha Energia                time weekday month\n1 2004-10-01  254046 2004-10-01 19:00:00  vie\\\\.   Oct\n2 2004-10-02  318280 2004-10-02 19:00:00  sáb\\\\.   Oct\n3 2004-10-03  293620 2004-10-03 19:00:00  dom\\\\.   Oct\n4 2004-10-04  333971 2004-10-04 19:00:00  lun\\\\.   Oct\n5 2004-10-05  347423 2004-10-05 19:00:00  mar\\\\.   Oct\n6 2004-10-06  347392 2004-10-06 19:00:00  mié\\\\.   Oct\n\ntail(energia_df)\n\n          fecha Energia                time weekday month\n5049 2018-07-28  345439 2018-07-28 19:00:00  sáb\\\\.   Jul\n5050 2018-07-29  326291 2018-07-29 19:00:00  dom\\\\.   Jul\n5051 2018-07-30  362481 2018-07-30 19:00:00  lun\\\\.   Jul\n5052 2018-07-31  367135 2018-07-31 19:00:00  mar\\\\.   Jul\n5053 2018-08-01  363979 2018-08-01 19:00:00  mié\\\\.   Aug\n5054 2018-08-02  371807 2018-08-02 19:00:00  jue\\\\.   Aug\n\n\n\n#energia_df%>%plot_seasonal_diagnostics(.date_var = time,.value = Energia,.feature_set = c(\"wday.lbl\"),.geom=\"boxplot\")\n#energia_df%>%plot_seasonal_diagnostics(.date_var = time,.value = Energia,.feature_set = c(\"month.lbl\"),.geom=\"boxplot\")\n\n\n# Periodograma Datos originales\n\nPeriodogramaEnergia2=spectrum(as.numeric(energia2),log='no')\n\n\n\nubicacionlogenergia=which.max(PeriodogramaEnergia2$spec)\n\nsprintf(\"El valor de la frecuencia donde se maximiza el periodograma para la serie es: %s\",PeriodogramaEnergia2$freq[ubicacionlogenergia])\n\n[1] \"El valor de la frecuencia donde se maximiza el periodograma para la serie es: 0.00546875\"\n\nsprintf(\"El periodo correspondiente es aproximadamente: %s\",1/PeriodogramaEnergia2$freq[ubicacionlogenergia])\n\n[1] \"El periodo correspondiente es aproximadamente: 182.857142857143\"\n\n\n\n# Periodograma sin tendencia lineal\n\nPeriodogramaEnergia2_lineal=spectrum(as.numeric(ElimiTendenerg),log='no')\n\n\n\nubicacionlogenergia=which.max(PeriodogramaEnergia2_lineal$spec)\n\nsprintf(\"El valor de la frecuencia donde se maximiza el periodograma para la serie es: %s\",PeriodogramaEnergia2_lineal$freq[ubicacionlogenergia])\n\n[1] \"El valor de la frecuencia donde se maximiza el periodograma para la serie es: 0.00546875\"\n\nsprintf(\"El periodo correspondiente es aproximadamente: %s\",1/PeriodogramaEnergia2_lineal$freq[ubicacionlogenergia])\n\n[1] \"El periodo correspondiente es aproximadamente: 182.857142857143\"\n\n\n\n# Periodograma diferenciación\n\nPeriodogramaEnergia2_dif=spectrum(as.numeric(diff(energia2)),log='no')\n\n\n\nubicacionlogenergia=which.max(PeriodogramaEnergia2_dif$spec)\n\nsprintf(\"El valor de la frecuencia donde se maximiza el periodograma para la serie es: %s\",PeriodogramaEnergia2_dif$freq[ubicacionlogenergia])\n\n[1] \"El valor de la frecuencia donde se maximiza el periodograma para la serie es: 0.2857421875\"\n\nsprintf(\"El periodo correspondiente es aproximadamente: %s\",1/PeriodogramaEnergia2_dif$freq[ubicacionlogenergia])\n\n[1] \"El periodo correspondiente es aproximadamente: 3.49965823650034\"\n\n\nPreguntar: Cuando lo hacemos con lenergia se veia que no habia tendencia, pero ahorita con los datos originales no, por la escala parece haber tendencia, y mirando el ACF se nota mucho la estacionalidad estimandola con diferenciacion"
  }
]